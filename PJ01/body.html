<!DOCTYPE html>
<html lang="de">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sectors mit Bildern</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            background: #222;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        .mainbody {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4 Spalten */
            gap: 10px;
            width: 80%;
            max-width: 900px;
            background-color: rgb(223, 223, 223);
            padding: 10px;
        }

        .sectors {
            border-radius: 5px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;

            /* Verhältnis Höhe : Breite = 5 : 4 */
            aspect-ratio: 5 / 4;

            position: relative;
            overflow: hidden;
        }

        .sectors.big {
            /* große Kacheln nehmen 2x2 Zellen ein */
            grid-column-end: span 2;
            grid-row-end: span 2;
        }

        .sectors img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* Optional: Nummer oben links anzeigen */
        .sectors::after {
            content: attr(data-id);
            position: absolute;
            top: 4px;
            left: 6px;
            padding: 2px 6px;
            font-size: 0.8rem;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="mainbody" id="mainbody"></div>

    <script>
        // Einstellungen
        const COLS = 4;
        const TOTAL_SECTORS = 26;
        const BIG_SECTORS = 2;
        const IMAGE_BASE_PATH = 'img';  // Ordnerpfad anpassen

        // Gesamtanzahl Zellen im Grid:
        // 1 normaler Sector = 1 Zelle
        // 1 großer Sector (2x2) = 4 Zellen = 1 Element + 3 extra Zellen
        const totalCells = TOTAL_SECTORS + 3 * BIG_SECTORS; // 26 + 6 = 32
        const ROWS = totalCells / COLS; // 32 / 4 = 8

        if (!Number.isInteger(ROWS)) {
            console.warn('Konfiguration passt nicht exakt ins Grid!');
        }

        const bigBlocks = []; // Positionen der 2x2-Blöcke (top-left)

        function blocksOverlap(r1, c1, r2, c2) {
            // Prüfen, ob sich zwei 2x2-Blöcke überlappen
            return !(r1 + 1 < r2 || r1 > r2 + 1 || c1 + 1 < c2 || c1 > c2 + 1);
        }

        // Zufällig zwei 2x2-Blöcke setzen (ohne Überlappung)
        while (bigBlocks.length < BIG_SECTORS) {
            const r = Math.floor(Math.random() * (ROWS - 1)); // 0..ROWS-2
            const c = Math.floor(Math.random() * (COLS - 1)); // 0..COLS-2

            let ok = true;
            for (const b of bigBlocks) {
                if (blocksOverlap(r, c, b.row, b.col)) {
                    ok = false;
                    break;
                }
            }
            if (!ok) continue;

            bigBlocks.push({ row: r, col: c });
        }

        function cellInBig(r, c) {
            // Gibt den Block zurück, falls diese Zelle in einem 2x2-Block liegt
            return bigBlocks.find(b =>
                r >= b.row && r <= b.row + 1 &&
                c >= b.col && c <= b.col + 1
            );
        }

        // Sectors mit fester Position vorbereiten
        const sectorsConfig = [];
        let id = 1;

        for (let r = 0; r < ROWS; r++) {
            for (let c = 0; c < COLS; c++) {
                const block = cellInBig(r, c);

                if (block) {
                    // Zelle gehört zu einem großen Block
                    if (r === block.row && c === block.col) {
                        // nur oben links erzeugen wir das große Element
                        sectorsConfig.push({
                            id,
                            rowStart: r + 1,   // CSS Grid ist 1-basiert
                            colStart: c + 1,
                            big: true
                        });
                        id++;
                    }
                    // andere 3 Zellen des Blocks werden vom großen Element überdeckt
                } else {
                    // normaler Sector
                    sectorsConfig.push({
                        id,
                        rowStart: r + 1,
                        colStart: c + 1,
                        big: false
                    });
                    id++;
                }
            }
        }

        // Sicherheitscheck: wir sollten genau 26 Sectors haben
        if (sectorsConfig.length !== TOTAL_SECTORS) {
            console.warn('Anzahl der erzeugten Sectors stimmt nicht:', sectorsConfig.length);
        }

        const mainbody = document.getElementById('mainbody');

        sectorsConfig.forEach(cfg => {
            const div = document.createElement('div');
            div.classList.add('sectors');
            if (cfg.big) div.classList.add('big');

            // Nummer für Debug / Overlay
            const idStr = String(cfg.id).padStart(2, '0');
            div.dataset.id = idStr;

            // Bild-Element erstellen
            const img = document.createElement('img');

            // Erst .jpg probieren, wenn Fehler → .png
            img.src = `${IMAGE_BASE_PATH}/${idStr}.jpg`;
            img.alt = `Bild ${idStr}`;
            img.onerror = () => {
                img.onerror = null; // Endlosschleife vermeiden
                img.src = `${IMAGE_BASE_PATH}/${idStr}.png`;
            };

            div.appendChild(img);

            // Position im Grid explizit setzen
            div.style.gridRowStart = cfg.rowStart;
            div.style.gridColumnStart = cfg.colStart;

            mainbody.appendChild(div);
        });
    </script>
</body>
</html>
